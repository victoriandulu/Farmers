<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>FarmersKit - Smart Farming Platform</title>
  <link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;600;700&family=Space+Mono:wght@400;700&display=swap" rel="stylesheet">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    :root {
      --primary: #2D5016;
      --primary-light: #4A7C2E;
      --primary-dark: #1A3009;
      --secondary: #D97706;
      --accent: #F59E0B;
      --success: #10B981;
      --warning: #EF4444;
      --bg: #FAFAF9;
      --surface: #FFFFFF;
      --text: #1C1917;
      --text-muted: #78716C;
      --border: #E7E5E4;
      --shadow: 0 1px 3px rgba(0,0,0,0.1), 0 1px 2px rgba(0,0,0,0.06);
      --shadow-lg: 0 10px 25px rgba(0,0,0,0.1), 0 4px 6px rgba(0,0,0,0.05);
    }

    body {
      font-family: 'DM Sans', sans-serif;
      background: var(--bg);
      color: var(--text);
      line-height: 1.6;
      overflow-x: hidden;
    }

    /* Header Styles */
    header {
      background: var(--surface);
      border-bottom: 2px solid var(--primary);
      padding: 1rem 2rem;
      display: flex;
      align-items: center;
      justify-content: space-between;
      position: sticky;
      top: 0;
      z-index: 1000;
      box-shadow: var(--shadow);
    }

    .brand {
      font-size: 1.5rem;
      font-weight: 700;
      color: var(--primary);
      display: flex;
      align-items: center;
      gap: 0.5rem;
      font-family: 'Space Mono', monospace;
    }

    .nav-links {
      display: flex;
      gap: 0.5rem;
      flex: 1;
      justify-content: center;
    }

    .nav-links a {
      padding: 0.5rem 1rem;
      color: var(--text-muted);
      text-decoration: none;
      border-radius: 6px;
      font-weight: 500;
      transition: all 0.3s ease;
      position: relative;
    }

    .nav-links a:hover {
      color: var(--primary);
      background: rgba(45, 80, 22, 0.05);
    }

    .nav-links a.active {
      color: var(--primary);
      background: rgba(45, 80, 22, 0.1);
    }

    .nav-links a.active::after {
      content: '';
      position: absolute;
      bottom: -1rem;
      left: 50%;
      transform: translateX(-50%);
      width: 40%;
      height: 2px;
      background: var(--primary);
    }

    .menu-toggle {
      display: none;
      font-size: 1.5rem;
      cursor: pointer;
      color: var(--primary);
    }

    /* Sidebar for mobile */
    .sidebar {
      position: fixed;
      left: -300px;
      top: 0;
      width: 280px;
      height: 100vh;
      background: var(--surface);
      border-right: 2px solid var(--primary);
      padding: 2rem 1rem;
      transition: left 0.3s ease;
      z-index: 2000;
      overflow-y: auto;
    }

    .sidebar.active {
      left: 0;
    }

    .sidebar .brand {
      margin-bottom: 2rem;
      font-size: 1.3rem;
    }

    .sidebar .close-btn {
      position: absolute;
      top: 1rem;
      right: 1rem;
      font-size: 1.5rem;
      cursor: pointer;
      color: var(--primary);
    }

    .sidebar a {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      padding: 0.75rem 1rem;
      color: var(--text);
      text-decoration: none;
      border-radius: 6px;
      margin-bottom: 0.25rem;
      transition: all 0.3s ease;
    }

    .sidebar a:hover {
      background: rgba(45, 80, 22, 0.1);
      color: var(--primary);
    }

    /* Main Content */
    main {
      max-width: 1400px;
      margin: 0 auto;
      padding: 2rem;
      animation: fadeIn 0.5s ease;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .section {
      display: none;
      animation: slideIn 0.4s ease;
    }

    .section.active {
      display: block;
    }

    @keyframes slideIn {
      from { opacity: 0; transform: translateX(-20px); }
      to { opacity: 1; transform: translateX(0); }
    }

    .page-header {
      margin-bottom: 2rem;
      padding-bottom: 1rem;
      border-bottom: 2px solid var(--border);
    }

    .page-header h2 {
      font-size: 2rem;
      color: var(--primary-dark);
      margin-bottom: 0.5rem;
      font-family: 'Space Mono', monospace;
    }

    .page-header p {
      color: var(--text-muted);
      font-size: 1.1rem;
    }

    /* Grid Layouts */
    .dashboard-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 1.5rem;
      margin-bottom: 1.5rem;
    }

    .stats-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 1.5rem;
      margin-bottom: 2rem;
    }

    /* Card Styles */
    .card {
      background: var(--surface);
      border-radius: 12px;
      padding: 1.5rem;
      box-shadow: var(--shadow);
      transition: all 0.3s ease;
      border: 1px solid var(--border);
    }

    .card:hover {
      box-shadow: var(--shadow-lg);
      transform: translateY(-2px);
    }

    .card h4 {
      color: var(--primary-dark);
      margin-bottom: 1rem;
      font-size: 1.1rem;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .card p {
      color: var(--text-muted);
      line-height: 1.8;
    }

    .weather-card {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
    }

    .weather-card h4,
    .weather-card p {
      color: white;
    }

    .alert-card {
      background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
      color: white;
    }

    .alert-card h4,
    .alert-card p {
      color: white;
    }

    .market-card {
      background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
      color: white;
    }

    .market-card h4,
    .market-card p {
      color: white;
    }

    .stat-card {
      background: linear-gradient(135deg, var(--primary-light), var(--primary-dark));
      color: white;
      border-radius: 12px;
      padding: 2rem 1.5rem;
      text-align: center;
      box-shadow: var(--shadow);
      transition: all 0.3s ease;
    }

    .stat-card:hover {
      transform: translateY(-4px);
      box-shadow: var(--shadow-lg);
    }

    .stat-number {
      font-size: 2.5rem;
      font-weight: 700;
      margin-bottom: 0.5rem;
      font-family: 'Space Mono', monospace;
    }

    .stat-card p {
      color: rgba(255,255,255,0.9);
      font-size: 0.95rem;
    }

    /* Tables */
    .data-table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 1rem;
    }

    .data-table thead {
      background: var(--primary);
      color: white;
    }

    .data-table th,
    .data-table td {
      padding: 1rem;
      text-align: left;
      border-bottom: 1px solid var(--border);
    }

    .data-table tbody tr:hover {
      background: rgba(45, 80, 22, 0.05);
    }

    /* Buttons */
    .btn {
      background: var(--primary);
      color: white;
      padding: 0.75rem 1.5rem;
      border: none;
      border-radius: 8px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      font-size: 0.95rem;
      display: inline-block;
      text-decoration: none;
    }

    .btn:hover {
      background: var(--primary-dark);
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(45, 80, 22, 0.3);
    }

    .btn:active {
      transform: translateY(0);
    }

    .btn-secondary {
      background: var(--secondary);
    }

    .btn-secondary:hover {
      background: #B45309;
    }

    .btn-danger {
      background: var(--warning);
    }

    .btn-danger:hover {
      background: #DC2626;
    }

    .btn-success {
      background: var(--success);
    }

    .btn-success:hover {
      background: #059669;
    }

    /* Form Elements */
    .input-group {
      margin-bottom: 1rem;
    }

    .input-group label {
      display: block;
      margin-bottom: 0.5rem;
      color: var(--text);
      font-weight: 500;
    }

    .input-group input,
    .input-group select,
    .input-group textarea {
      width: 100%;
      padding: 0.75rem;
      border: 2px solid var(--border);
      border-radius: 8px;
      font-family: inherit;
      font-size: 0.95rem;
      transition: all 0.3s ease;
    }

    .input-group input:focus,
    .input-group select:focus,
    .input-group textarea:focus {
      outline: none;
      border-color: var(--primary);
      box-shadow: 0 0 0 3px rgba(45, 80, 22, 0.1);
    }

    /* Progress Bar */
    .progress-bar {
      width: 100%;
      height: 8px;
      background: rgba(0,0,0,0.1);
      border-radius: 4px;
      overflow: hidden;
      margin: 1rem 0 0.5rem 0;
    }

    .progress-fill {
      height: 100%;
      background: var(--success);
      border-radius: 4px;
      transition: width 0.5s ease;
    }

    /* Chat Interface */
    .chat-container {
      background: var(--surface);
      border-radius: 12px;
      padding: 1.5rem;
      box-shadow: var(--shadow);
      margin-bottom: 2rem;
      border: 1px solid var(--border);
    }

    .chat-messages {
      height: 400px;
      overflow-y: auto;
      margin-bottom: 1rem;
      padding: 1rem;
      background: var(--bg);
      border-radius: 8px;
    }

    .message {
      margin-bottom: 1rem;
      padding: 1rem;
      border-radius: 8px;
      animation: messageSlide 0.3s ease;
    }

    @keyframes messageSlide {
      from { opacity: 0; transform: translateX(-10px); }
      to { opacity: 1; transform: translateX(0); }
    }

    .bot-message {
      background: var(--primary);
      color: white;
      margin-right: 20%;
    }

    .user-message {
      background: var(--secondary);
      color: white;
      margin-left: 20%;
      text-align: right;
    }

    .chat-input {
      display: flex;
      gap: 1rem;
    }

    .chat-input input {
      flex: 1;
      padding: 0.75rem;
      border: 2px solid var(--border);
      border-radius: 8px;
      font-family: inherit;
    }

    .chat-input input:focus {
      outline: none;
      border-color: var(--primary);
    }

    /* Forum Posts */
    .forum-post {
      background: var(--bg);
      padding: 1.5rem;
      border-radius: 8px;
      margin-bottom: 1rem;
      border-left: 4px solid var(--primary);
    }

    .post-header {
      display: flex;
      justify-content: space-between;
      margin-bottom: 0.75rem;
      font-size: 0.9rem;
      color: var(--text-muted);
    }

    .forum-post h5 {
      color: var(--primary-dark);
      margin-bottom: 0.5rem;
      font-size: 1.1rem;
    }

    /* Footer */
    footer {
      background: var(--primary-dark);
      color: white;
      text-align: center;
      padding: 2rem;
      margin-top: 4rem;
    }

    footer p {
      color: rgba(255,255,255,0.9);
      margin: 0.5rem 0;
    }

    /* Notifications */
    .notification {
      position: fixed;
      top: 100px;
      right: 2rem;
      background: var(--surface);
      padding: 1rem 1.5rem;
      border-radius: 8px;
      box-shadow: var(--shadow-lg);
      border-left: 4px solid var(--success);
      z-index: 3000;
      animation: slideInRight 0.3s ease;
      max-width: 400px;
    }

    @keyframes slideInRight {
      from { opacity: 0; transform: translateX(100px); }
      to { opacity: 1; transform: translateX(0); }
    }

    .notification.error {
      border-left-color: var(--warning);
    }

    .notification.warning {
      border-left-color: var(--secondary);
    }

    /* Loading Spinner */
    .spinner {
      border: 3px solid rgba(0,0,0,0.1);
      border-left-color: var(--primary);
      border-radius: 50%;
      width: 40px;
      height: 40px;
      animation: spin 1s linear infinite;
      margin: 2rem auto;
    }

    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    /* Modal */
    .modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.5);
      z-index: 4000;
      justify-content: center;
      align-items: center;
    }

    .modal.active {
      display: flex;
    }

    .modal-content {
      background: var(--surface);
      padding: 2rem;
      border-radius: 12px;
      max-width: 600px;
      width: 90%;
      max-height: 90vh;
      overflow-y: auto;
      animation: modalSlide 0.3s ease;
    }

    @keyframes modalSlide {
      from { opacity: 0; transform: scale(0.9); }
      to { opacity: 1; transform: scale(1); }
    }

    .modal-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 1.5rem;
      padding-bottom: 1rem;
      border-bottom: 2px solid var(--border);
    }

    .modal-header h3 {
      color: var(--primary-dark);
      font-size: 1.5rem;
    }

    .modal-close {
      font-size: 1.5rem;
      cursor: pointer;
      color: var(--text-muted);
      background: none;
      border: none;
    }

    .modal-close:hover {
      color: var(--primary);
    }

    /* Responsive Design */
    @media (max-width: 768px) {
      .nav-links {
        display: none;
      }

      .menu-toggle {
        display: block;
      }

      main {
        padding: 1rem;
      }

      .dashboard-grid,
      .stats-grid {
        grid-template-columns: 1fr;
      }

      .data-table {
        font-size: 0.85rem;
      }

      .data-table thead {
        display: none;
      }

      .data-table tr {
        display: block;
        margin-bottom: 1rem;
        border: 1px solid var(--border);
        border-radius: 8px;
        padding: 1rem;
      }

      .data-table td {
        display: flex;
        justify-content: space-between;
        padding: 0.5rem 0;
        border: none;
      }

      .data-table td:before {
        content: attr(data-label);
        font-weight: 600;
        color: var(--primary);
      }

      .message {
        margin-left: 0 !important;
        margin-right: 0 !important;
      }

      .page-header h2 {
        font-size: 1.5rem;
      }

      .stat-number {
        font-size: 2rem;
      }
    }

    /* Charts */
    .chart-container {
      position: relative;
      height: 300px;
      margin: 1rem 0;
    }

    /* Badge */
    .badge {
      display: inline-block;
      padding: 0.25rem 0.75rem;
      border-radius: 12px;
      font-size: 0.85rem;
      font-weight: 600;
    }

    .badge-success {
      background: rgba(16, 185, 129, 0.1);
      color: var(--success);
    }

    .badge-warning {
      background: rgba(239, 68, 68, 0.1);
      color: var(--warning);
    }

    .badge-info {
      background: rgba(59, 130, 246, 0.1);
      color: #3B82F6;
    }
  </style>
</head>
<body>

<header>
  <div class="brand">üåæ FarmersKit</div>
  <nav class="nav-links">
    <a href="#" onclick="showSection('dashboard')" class="active">Dashboard</a>
    <a href="#" onclick="showSection('weather')">Weather</a>
    <a href="#" onclick="showSection('market')">Market</a>
    <a href="#" onclick="showSection('calendar')">Calendar</a>
    <a href="#" onclick="showSection('livestock')">Livestock</a>
    <a href="#" onclick="showSection('chatbot')">AI Assistant</a>
    <a href="#" onclick="showSection('experts')">Experts</a>
    <a href="#" onclick="showSection('forums')">Forums</a>
    <a href="#" onclick="showSection('funding')">Funding</a>
  </nav>
  <div class="menu-toggle" onclick="toggleSidebar()">‚ò∞</div>
</header>

<div class="sidebar" id="sidebar">
  <div class="brand">üåæ FarmersKit</div>
  <div class="close-btn" onclick="toggleSidebar()">‚úñ</div>
  <a href="#" onclick="showSection('dashboard'); toggleSidebar()">üè† Dashboard</a>
  <a href="#" onclick="showSection('weather'); toggleSidebar()">üå¶ Weather</a>
  <a href="#" onclick="showSection('market'); toggleSidebar()">üí∞ Market</a>
  <a href="#" onclick="showSection('calendar'); toggleSidebar()">üìÖ Calendar</a>
  <a href="#" onclick="showSection('livestock'); toggleSidebar()">üêÑ Livestock</a>
  <a href="#" onclick="showSection('chatbot'); toggleSidebar()">ü§ñ AI Assistant</a>
  <a href="#" onclick="showSection('experts'); toggleSidebar()">üë®‚Äç‚öïÔ∏è Experts</a>
  <a href="#" onclick="showSection('forums'); toggleSidebar()">üí¨ Forums</a>
  <a href="#" onclick="showSection('funding'); toggleSidebar()">üí≥ Funding</a>
</div>

<main>
  <!-- Dashboard Section -->
  <section id="dashboard" class="section active">
    <div class="page-header">
      <h2>Welcome back, <span id="userName">John Doe</span>! üë®üèæ‚Äçüåæ</h2>
      <p>Your smart farming dashboard - Everything you need at a glance</p>
    </div>

    <div class="dashboard-grid">
      <div class="card weather-card">
        <h4>üå§ Today's Weather</h4>
        <div style="font-size: 1.5rem; margin: 1rem 0;" id="currentTemp">27¬∞C</div>
        <p id="weatherDetails">Partly Cloudy ‚Ä¢ Nairobi<br>Humidity: 65% ‚Ä¢ Wind: 8 km/h<br>üíß Rain expected tomorrow</p>
      </div>

      <div class="card alert-card">
        <h4>‚ö† Farm Alerts</h4>
        <div id="farmAlerts">
          <p>‚Ä¢ Maize fertilizer due in 3 days<br>‚Ä¢ Cow #247 due for vaccination<br>‚Ä¢ Market prices up 15% this week</p>
        </div>
      </div>

      <div class="card market-card">
        <h4>üí∞ Quick Market Prices</h4>
        <div id="marketPrices">
          <p>Maize: KES 45/kg ‚Üó<br>Tomatoes: KES 80/kg ‚Üó<br>Milk: KES 60/L ‚Üò<br>Eggs: KES 18/piece ‚Üó</p>
        </div>
      </div>

      <div class="card">
        <h4>üêÑ Livestock Status</h4>
        <div id="livestockStatus">
          <p>Total Animals: <span id="totalAnimals">25</span><br>Pregnant Cows: <span id="pregnantCows">3</span><br>Next Vet Visit: Aug 3<br>Health Score: <span id="healthScore">95</span>%</p>
        </div>
      </div>

      <div class="card">
        <h4>üå± Crop Progress</h4>
        <div id="cropProgress">
          <p>Maize (5 acres): Flowering<br>Tomatoes (2 acres): Harvesting<br>Beans (1 acre): Planted<br>Overall Health: Good</p>
        </div>
      </div>

      <div class="card">
        <h4>üìä This Month</h4>
        <div id="monthlyFinancials">
          <p>Revenue: KES <span id="monthRevenue">125,000</span><br>Expenses: KES <span id="monthExpenses">45,000</span><br>Profit: KES <span id="monthProfit">80,000</span><br>ROI: <span id="monthROI">178</span>%</p>
        </div>
      </div>
    </div>
  </section>

  <!-- Weather Section -->
  <section id="weather" class="section">
    <div class="page-header">
      <h2>üå¶ Weather Forecast</h2>
      <p>Detailed weather information for your farm location</p>
    </div>

    <div class="dashboard-grid">
      <div class="card weather-card">
        <h4>Current Conditions</h4>
        <div style="font-size: 2rem; margin: 1rem 0;" id="currentTempDetail">27¬∞C</div>
        <p>Partly Cloudy<br>Feels like <span id="feelsLike">29</span>¬∞C<br>UV Index: <span id="uvIndex">7</span> (High)</p>
      </div>

      <div class="card">
        <h4>üìä Today's Details</h4>
        <p>Sunrise: <span id="sunrise">6:32 AM</span><br>Sunset: <span id="sunset">6:45 PM</span><br>Humidity: <span id="humidity">65</span>%<br>Pressure: <span id="pressure">1013</span> hPa<br>Visibility: <span id="visibility">10</span> km</p>
      </div>

      <div class="card">
        <h4>üåß Precipitation</h4>
        <p>Today: <span id="precipToday">0</span>mm<br>Tomorrow: <span id="precipTomorrow">5</span>mm expected<br>This Week: <span id="precipWeek">15</span>mm total<br>Soil Moisture: <span id="soilMoisture">Optimal</span></p>
      </div>
    </div>

    <div class="card">
      <h4>üìÖ 7-Day Forecast</h4>
      <table class="data-table" id="weatherForecast">
        <thead>
          <tr>
            <th>Day</th><th>Weather</th><th>High/Low</th><th>Rain</th><th>Farming Advice</th>
          </tr>
        </thead>
        <tbody id="forecastBody">
          <!-- Dynamic content -->
        </tbody>
      </table>
    </div>
  </section>

  <!-- Market Section -->
  <section id="market" class="section">
    <div class="page-header">
      <h2>üí∞ Market Hub</h2>
      <p>Real-time prices, trends, and marketplace</p>
    </div>

    <div class="dashboard-grid">
      <div class="card market-card">
        <h4>üî• Trending Prices</h4>
        <div id="trendingPrices">
          <p>Maize: KES 45/kg ‚Üó (+12%)<br>Tomatoes: KES 80/kg ‚Üó (+8%)<br>Milk: KES 60/L ‚Üò (-3%)<br>Beans: KES 120/kg ‚Üó (+15%)</p>
        </div>
      </div>

      <div class="card">
        <h4>üìà Price Alerts</h4>
        <div id="priceAlerts">
          <p>‚Ä¢ Maize hit your target of KES 45/kg!<br>‚Ä¢ Tomato prices rising - sell now<br>‚Ä¢ Bean demand high in Nakuru<br>‚Ä¢ Milk prices stabilizing</p>
        </div>
      </div>

      <div class="card">
        <h4>üéØ Your Products</h4>
        <button class="btn" onclick="openModal('sellModal')">+ Sell Products</button>
        <div id="userProducts" style="margin-top: 1rem;">
          <p>Ready to sell:<br>‚Ä¢ 500kg Maize<br>‚Ä¢ 200kg Tomatoes<br>‚Ä¢ 50L Fresh Milk</p>
        </div>
      </div>
    </div>

    <div class="card">
      <h4>üõí Available Products Near You</h4>
      <table class="data-table">
        <thead>
          <tr><th>Product</th><th>Price</th><th>Quantity</th><th>Location</th><th>Seller</th><th>Action</th></tr>
        </thead>
        <tbody id="marketProducts">
          <!-- Dynamic content -->
        </tbody>
      </table>
    </div>
  </section>

  <!-- Crop Calendar Section -->
  <section id="calendar" class="section">
    <div class="page-header">
      <h2>üìÖ Smart Crop Calendar</h2>
      <p>Never miss important farming activities</p>
    </div>

    <div class="dashboard-grid">
      <div class="card alert-card">
        <h4>üö® Urgent Tasks (Next 7 Days)</h4>
        <div id="urgentTasks">
          <p>‚Ä¢ Aug 1: Apply fertilizer to Maize (Field A)<br>‚Ä¢ Aug 3: Weed Tomato field<br>‚Ä¢ Aug 5: Harvest early tomatoes<br>‚Ä¢ Aug 7: Plant beans (Field C)</p>
        </div>
      </div>

      <div class="card">
        <h4>üìä Current Crop Status</h4>
        <div id="currentCropStatus">
          <p>Maize: Day 85 (Flowering)<br>Tomatoes: Day 120 (Harvest Ready)<br>Beans: Day 15 (Germination)<br>Kale: Day 45 (Growing)</p>
        </div>
      </div>
    </div>

    <div class="card">
      <h4>üóì Monthly Calendar - <span id="calendarMonth">August 2026</span></h4>
      <table class="data-table">
        <thead>
          <tr><th>Date</th><th>Crop</th><th>Activity</th><th>Field</th><th>Status</th><th>Action</th></tr>
        </thead>
        <tbody id="calendarActivities">
          <!-- Dynamic content -->
        </tbody>
      </table>
    </div>

    <div class="card">
      <h4>‚ûï Add New Crop Activity</h4>
      <div class="input-group">
        <label>Crop Type</label>
        <select id="newCropType">
          <option>Maize</option>
          <option>Tomatoes</option>
          <option>Beans</option>
          <option>Kale</option>
          <option>Other</option>
        </select>
      </div>
      <div class="input-group">
        <label>Activity</label>
        <select id="newActivity">
          <option>Planting</option>
          <option>Fertilizing</option>
          <option>Weeding</option>
          <option>Spraying</option>
          <option>Harvesting</option>
        </select>
      </div>
      <div class="input-group">
        <label>Date</label>
        <input type="date" id="newActivityDate">
      </div>
      <div class="input-group">
        <label>Field/Location</label>
        <input type="text" id="newActivityField" placeholder="e.g., Field A, Greenhouse 1">
      </div>
      <button class="btn" onclick="addCropActivity()">Add Activity</button>
    </div>
  </section>

  <!-- Livestock Section -->
  <section id="livestock" class="section">
    <div class="page-header">
      <h2>üêÑ Livestock Management</h2>
      <p>Track your animals' health, breeding, and productivity</p>
    </div>

    <div class="stats-grid">
      <div class="stat-card">
        <div class="stat-number" id="statTotalAnimals">25</div>
        <p>Total Animals</p>
      </div>
      <div class="stat-card">
        <div class="stat-number" id="statPregnantCows">3</div>
        <p>Pregnant Cows</p>
      </div>
      <div class="stat-card">
        <div class="stat-number" id="statHealthScore">95%</div>
        <p>Health Score</p>
      </div>
      <div class="stat-card">
        <div class="stat-number" id="statDailyMilk">450L</div>
        <p>Daily Milk</p>
      </div>
    </div>

    <div class="card">
      <h4>ü§± Pregnancy Tracker</h4>
      <table class="data-table">
        <thead>
          <tr><th>Animal ID</th><th>Breed</th><th>Due Date</th><th>Days Left</th><th>Stage</th><th>Status</th></tr>
        </thead>
        <tbody id="pregnancyTracker">
          <!-- Dynamic content -->
        </tbody>
      </table>
    </div>

    <div class="dashboard-grid">
      <div class="card">
        <h4>üíâ Health & Vaccinations</h4>
        <div id="healthVaccinations">
          <p>Next Vaccinations:<br>‚Ä¢ COW-247: Deworming (Aug 3)<br>‚Ä¢ All Chickens: Newcastle (Aug 10)<br>‚Ä¢ COW-189: Vitamin injection (Aug 5)</p>
        </div>
        <button class="btn" style="margin-top: 1rem;" onclick="openModal('vetModal')">Schedule Vet Visit</button>
      </div>

      <div class="card">
        <h4>ü•õ Milk Production</h4>
        <div id="milkProduction">
          <p>Today: <span id="milkToday">450</span>L<br>This Week: <span id="milkWeek">3,150</span>L<br>Monthly Average: <span id="milkAverage">425</span>L/day<br>Top Producer: COW-156 (25L/day)</p>
        </div>
        <div class="progress-bar">
          <div class="progress-fill" id="milkProgress" style="width: 85%;"></div>
        </div>
        <small><span id="milkProgressPercent">85</span>% of target reached</small>
      </div>

      <div class="card">
        <h4>üê£ Poultry Corner</h4>
        <div id="poultryInfo">
          <p>Total Birds: <span id="totalBirds">150</span><br>Layers: <span id="layerBirds">120</span> (98% laying)<br>Broilers: <span id="broilerBirds">30</span> (6 weeks old)<br>Daily Eggs: <span id="dailyEggs">115</span></p>
        </div>
        <button class="btn btn-secondary" onclick="openModal('eggCollectionModal')">Record Collection</button>
      </div>
    </div>

    <div class="card">
      <h4>‚ûï Add New Animal</h4>
      <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem;">
        <div class="input-group">
          <label>Animal Type</label>
          <select id="newAnimalType">
            <option>Cow</option>
            <option>Goat</option>
            <option>Sheep</option>
            <option>Chicken</option>
            <option>Pig</option>
          </select>
        </div>
        <div class="input-group">
          <label>Breed</label>
          <input type="text" id="newAnimalBreed" placeholder="e.g., Friesian">
        </div>
        <div class="input-group">
          <label>Tag/ID Number</label>
          <input type="text" id="newAnimalID" placeholder="e.g., COW-350">
        </div>
        <div class="input-group">
          <label>Date of Birth</label>
          <input type="date" id="newAnimalDOB">
        </div>
      </div>
      <button class="btn" onclick="addNewAnimal()">Add Animal</button>
    </div>
  </section>

  <!-- AI Chatbot Section -->
  <section id="chatbot" class="section">
    <div class="page-header">
      <h2>ü§ñ AI Farming Assistant</h2>
      <p>Get instant answers to your farming questions 24/7</p>
    </div>

    <div class="chat-container">
      <div class="chat-messages" id="chatMessages">
        <div class="message bot-message">
          <strong>FarmBot:</strong> Hello <span id="chatUserName">John</span>! I'm your AI farming assistant. Ask me anything about crops, livestock, weather, or farming techniques. How can I help you today?
        </div>
      </div>
      <div class="chat-input">
        <input type="text" id="chatInput" placeholder="Ask me anything about farming..." onkeypress="if(event.key==='Enter') sendMessage()">
        <button class="btn" onclick="sendMessage()">Send</button>
      </div>
    </div>

    <div class="dashboard-grid">
      <div class="card">
        <h4>üî• Popular Questions</h4>
        <p style="margin-bottom: 1rem;">Quick answers to common farming questions:</p>
        <button class="btn btn-secondary" onclick="askQuestion('What fertilizer should I use for maize?')" style="margin: 0.25rem; font-size: 0.9rem;">Maize Fertilizer</button>
        <button class="btn btn-secondary" onclick="askQuestion('How to treat sick chickens?')" style="margin: 0.25rem; font-size: 0.9rem;">Chicken Health</button>
        <button class="btn btn-secondary" onclick="askQuestion('Best time to plant tomatoes?')" style="margin: 0.25rem; font-size: 0.9rem;">Tomato Planting</button>
        <button class="btn btn-secondary" onclick="askQuestion('Signs of cow pregnancy?')" style="margin: 0.25rem; font-size: 0.9rem;">Cow Pregnancy</button>
        <button class="btn btn-secondary" onclick="askQuestion('How to increase milk production?')" style="margin: 0.25rem; font-size: 0.9rem;">Milk Production</button>
        <button class="btn btn-secondary" onclick="askQuestion('Pest control for tomatoes?')" style="margin: 0.25rem; font-size: 0.9rem;">Pest Control</button>
      </div>

      <div class="card">
        <h4>üìö AI Knowledge Areas</h4>
        <p>‚Ä¢ Crop diseases & pest control<br>‚Ä¢ Livestock health & breeding<br>‚Ä¢ Soil management & fertilizers<br>‚Ä¢ Weather-based farming advice<br>‚Ä¢ Market timing & prices<br>‚Ä¢ Organic farming techniques<br>‚Ä¢ Irrigation & water management<br>‚Ä¢ Greenhouse farming</p>
      </div>
    </div>
  </section>

  <!-- Experts Section -->
  <section id="experts" class="section">
    <div class="page-header">
      <h2>üë®‚Äç‚öïÔ∏è Expert Directory</h2>
      <p>Connect with agricultural professionals in your area</p>
    </div>

    <div class="dashboard-grid">
      <div class="card">
        <h4>üîç Find Experts</h4>
        <div class="input-group">
          <label>Expert Type</label>
          <select id="expertType">
            <option>All Experts</option>
            <option>Veterinarians</option>
            <option>Crop Specialists</option>
            <option>Soil Experts</option>
            <option>Agricultural Officers</option>
            <option>Equipment Technicians</option>
          </select>
        </div>
        <div class="input-group">
          <label>Location</label>
          <select id="expertLocation">
            <option>Nairobi County</option>
            <option>Kiambu County</option>
            <option>Nakuru County</option>
            <option>Meru County</option>
          </select>
        </div>
        <button class="btn" onclick="searchExperts()">Search Experts</button>
      </div>

      <div class="card">
        <h4>üÜò Emergency Contacts</h4>
        <p><strong>24/7 Vet Hotline:</strong> +254-700-VETHELP<br><strong>Crop Disease Alert:</strong> +254-700-CROPSOS<br><strong>Weather Emergency:</strong> +254-700-WEATHER<br><strong>Market Support:</strong> +254-700-MARKETS</p>
        <button class="btn btn-danger" onclick="reportEmergency()">Report Emergency</button>
      </div>
    </div>

    <div class="card">
      <h4>ü•º Available Experts Near You</h4>
      <table class="data-table">
        <thead>
          <tr><th>Name</th><th>Specialization</th><th>Location</th><th>Rating</th><th>Availability</th><th>Contact</th></tr>
        </thead>
        <tbody id="expertsTable">
          <!-- Dynamic content -->
        </tbody>
      </table>
    </div>

    <div class="card">
      <h4>üìÖ My Expert Consultations</h4>
      <div id="myConsultations">
        <div class="forum-post">
          <div class="post-header">
            <span><strong>Dr. Sarah Wanjiku</strong> - Veterinarian</span>
            <span>July 25, 2026</span>
          </div>
          <p><strong>Consultation:</strong> Cow pregnancy check for COW-247<br><strong>Outcome:</strong> Healthy pregnancy, due Sept 15th. Recommended vitamin supplements.<br><strong>Follow-up:</strong> Check-up scheduled for Aug 15th</p>
          <button class="btn btn-secondary">Rate Consultation</button>
        </div>
      </div>
    </div>
  </section>

  <!-- Forums Section -->
  <section id="forums" class="section">
    <div class="page-header">
      <h2>üí¨ Community Forums</h2>
      <p>Connect, share knowledge, and learn from fellow farmers</p>
    </div>

    <div class="dashboard-grid">
      <div class="card">
        <h4>üìä Forum Stats</h4>
        <p>Active Members: <span id="forumMembers">2,847</span><br>Posts This Week: <span id="forumPostsWeek">156</span><br>Questions Answered: <span id="forumQuestionsAnswered">1,234</span><br>Your Reputation: <span id="userReputation">850</span> points</p>
      </div>

      <div class="card">
        <h4>üèÜ Top Contributors</h4>
        <div id="topContributors">
          <p>1. ü•á Mary Njeri (2,450 pts)<br>2. ü•à Peter Kiplimo (2,100 pts)<br>3. ü•â John Doe (850 pts) - You!<br>4. David Ouma (720 pts)</p>
        </div>
      </div>

      <div class="card">
        <h4>‚ûï Start New Discussion</h4>
        <div class="input-group">
          <label>Category</label>
          <select id="newForumCategory">
            <option>General Farming</option>
            <option>Crop Management</option>
            <option>Livestock Care</option>
            <option>Market Discussion</option>
            <option>Equipment & Tools</option>
            <option>Success Stories</option>
          </select>
        </div>
        <div class="input-group">
          <label>Title</label>
          <input type="text" id="newForumTitle" placeholder="What's your question or topic?">
        </div>
        <div class="input-group">
          <label>Description</label>
          <textarea id="newForumDescription" rows="3" placeholder="Provide details about your question or topic..."></textarea>
        </div>
        <button class="btn" onclick="createForumPost()">Create Post</button>
      </div>
    </div>

    <div class="card">
      <h4>üî• Trending Discussions</h4>
      <div id="forumPosts">
        <!-- Dynamic content -->
      </div>
    </div>
  </section>

  <!-- Funding Section -->
  <section id="funding" class="section">
    <div class="page-header">
      <h2>üí≥ Funding & Grants</h2>
      <p>Access financial support and growth opportunities</p>
    </div>

    <div class="dashboard-grid">
      <div class="card">
        <h4>üí∞ Available Opportunities</h4>
        <p>Active Grants: <span id="activeGrants">12</span><br>Government Programs: <span id="govPrograms">8</span><br>NGO Funding: <span id="ngoFunding">15</span><br>Microfinance: <span id="microfinance">25</span><br>Total Available: KES <span id="totalFunding">2.5M</span></p>
      </div>

      <div class="card">
        <h4>üìä Your Applications</h4>
        <p>Submitted: <span id="appsSubmitted">3</span><br>Under Review: <span id="appsReview">2</span><br>Approved: <span id="appsApproved">1</span><br>Total Received: KES <span id="fundingReceived">85,000</span></p>
        <div class="progress-bar">
          <div class="progress-fill" id="fundingProgress" style="width: 40%;"></div>
        </div>
        <small><span id="fundingSuccessRate">40</span>% success rate</small>
      </div>

      <div class="card">
        <h4>üéØ Recommended for You</h4>
        <div id="recommendedFunding">
          <p>Based on your profile:<br>‚Ä¢ Youth Agribusiness Fund<br>‚Ä¢ Dairy Development Grant<br>‚Ä¢ Climate Smart Agriculture<br>‚Ä¢ Women in Agriculture</p>
        </div>
        <button class="btn">View Recommendations</button>
      </div>
    </div>

    <div class="card">
      <h4>üÜï Latest Funding Opportunities</h4>
      <table class="data-table">
        <thead>
          <tr><th>Program</th><th>Amount</th><th>Deadline</th><th>Eligibility</th><th>Status</th><th>Action</th></tr>
        </thead>
        <tbody id="fundingOpportunities">
          <!-- Dynamic content -->
        </tbody>
      </table>
    </div>

    <div class="card">
      <h4>üìã Quick Application</h4>
      <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1rem;">
        <div class="input-group">
          <label>Funding Type</label>
          <select id="fundingType">
            <option>Government Grant</option>
            <option>NGO Funding</option>
            <option>Microfinance Loan</option>
            <option>Equipment Lease</option>
          </select>
        </div>
        <div class="input-group">
          <label>Amount Needed (KES)</label>
          <input type="number" id="fundingAmount" placeholder="e.g., 100000">
        </div>
        <div class="input-group">
          <label>Purpose</label>
          <select id="fundingPurpose">
            <option>Equipment Purchase</option>
            <option>Crop Production</option>
            <option>Livestock Investment</option>
            <option>Infrastructure</option>
            <option>Working Capital</option>
          </select>
        </div>
      </div>
      <div class="input-group">
        <label>Project Description</label>
        <textarea id="fundingDescription" placeholder="Describe your farming project and how the funding will be used..." rows="3"></textarea>
      </div>
      <button class="btn" onclick="submitFundingApplication()">Submit Application</button>
    </div>

    <div class="card">
      <h4>üìà Financial Planning Tools</h4>
      <div class="dashboard-grid">
        <div class="stat-card">
          <div class="stat-number">KES <span id="finMonthRevenue">125K</span></div>
          <p>Monthly Revenue</p>
        </div>
        <div class="stat-card">
          <div class="stat-number">KES <span id="finMonthExpenses">45K</span></div>
          <p>Monthly Expenses</p>
        </div>
        <div class="stat-card">
          <div class="stat-number">KES <span id="finNetProfit">80K</span></div>
          <p>Net Profit</p>
        </div>
        <div class="stat-card">
          <div class="stat-number"><span id="finROI">178</span>%</div>
          <p>ROI</p>
        </div>
      </div>
      <button class="btn btn-secondary" onclick="downloadFinancialReport()">Download Financial Report</button>
    </div>
  </section>
</main>

<!-- Modals -->
<!-- Sell Product Modal -->
<div class="modal" id="sellModal">
  <div class="modal-content">
    <div class="modal-header">
      <h3>üì¶ Sell Your Products</h3>
      <button class="modal-close" onclick="closeModal('sellModal')">‚úñ</button>
    </div>
    <div class="input-group">
      <label>Product Type</label>
      <select id="sellProductType">
        <option>Maize</option>
        <option>Tomatoes</option>
        <option>Milk</option>
        <option>Eggs</option>
        <option>Beans</option>
        <option>Potatoes</option>
      </select>
    </div>
    <div class="input-group">
      <label>Quantity (kg/L)</label>
      <input type="number" id="sellQuantity" placeholder="Enter quantity">
    </div>
    <div class="input-group">
      <label>Price per unit (KES)</label>
      <input type="number" id="sellPrice" placeholder="Enter your price">
    </div>
    <div class="input-group">
      <label>Location</label>
      <input type="text" id="sellLocation" placeholder="Your location">
    </div>
    <button class="btn" onclick="listProduct()">List Product</button>
    <button class="btn btn-danger" onclick="closeModal('sellModal')">Cancel</button>
  </div>
</div>

<!-- Vet Visit Modal -->
<div class="modal" id="vetModal">
  <div class="modal-content">
    <div class="modal-header">
      <h3>üìÖ Schedule Vet Visit</h3>
      <button class="modal-close" onclick="closeModal('vetModal')">‚úñ</button>
    </div>
    <div class="input-group">
      <label>Animal ID</label>
      <input type="text" id="vetAnimalID" placeholder="e.g., COW-247">
    </div>
    <div class="input-group">
      <label>Reason for Visit</label>
      <select id="vetReason">
        <option>Routine Checkup</option>
        <option>Vaccination</option>
        <option>Pregnancy Check</option>
        <option>Treatment</option>
        <option>Emergency</option>
      </select>
    </div>
    <div class="input-group">
      <label>Preferred Date</label>
      <input type="date" id="vetDate">
    </div>
    <div class="input-group">
      <label>Notes</label>
      <textarea id="vetNotes" rows="3" placeholder="Additional information..."></textarea>
    </div>
    <button class="btn" onclick="scheduleVetVisit()">Schedule Visit</button>
    <button class="btn btn-danger" onclick="closeModal('vetModal')">Cancel</button>
  </div>
</div>

<!-- Egg Collection Modal -->
<div class="modal" id="eggCollectionModal">
  <div class="modal-content">
    <div class="modal-header">
      <h3>üê£ Record Egg Collection</h3>
      <button class="modal-close" onclick="closeModal('eggCollectionModal')">‚úñ</button>
    </div>
    <div class="input-group">
      <label>Number of Eggs Collected</label>
      <input type="number" id="eggCount" placeholder="Enter number of eggs">
    </div>
    <div class="input-group">
      <label>Collection Date</label>
      <input type="date" id="eggDate" value="">
    </div>
    <div class="input-group">
      <label>Damaged/Broken Eggs</label>
      <input type="number" id="eggDamaged" placeholder="0">
    </div>
    <button class="btn" onclick="recordEggCollection()">Record Collection</button>
    <button class="btn btn-danger" onclick="closeModal('eggCollectionModal')">Cancel</button>
  </div>
</div>

<footer>
  <p>&copy; 2026 FarmersKit | Empowering Kenyan Farmers Through Smart Technology</p>
  <p>Contact: info@farmerskit.co.ke | Support: +254-700-FARMERS</p>
</footer>

<script>
  // Data Storage
  let farmData = {
    user: {
      name: 'John Doe',
      location: 'Nairobi',
      farmSize: 10,
      reputation: 850
    },
    livestock: {
      total: 25,
      pregnant: 3,
      healthScore: 95,
      dailyMilk: 450,
      totalBirds: 150,
      layers: 120,
      broilers: 30,
      dailyEggs: 115
    },
    crops: [],
    calendar: [],
    marketProducts: [],
    experts: [],
    forumPosts: [],
    fundingOpps: [],
    chatHistory: []
  };

  // Initialize app
  document.addEventListener('DOMContentLoaded', function() {
    initializeApp();
    loadForecastData();
    loadMarketProducts();
    loadCalendarActivities();
    loadPregnancyTracker();
    loadExperts();
    loadForumPosts();
    loadFundingOpportunities();
    setTodayDate();
  });

  function initializeApp() {
    updateDashboard();
    startAutoUpdate();
  }

  function setTodayDate() {
    const today = new Date().toISOString().split('T')[0];
    document.getElementById('eggDate').value = today;
  }

  function updateDashboard() {
    document.getElementById('userName').textContent = farmData.user.name;
    document.getElementById('chatUserName').textContent = farmData.user.name.split(' ')[0];
    document.getElementById('totalAnimals').textContent = farmData.livestock.total;
    document.getElementById('pregnantCows').textContent = farmData.livestock.pregnant;
    document.getElementById('healthScore').textContent = farmData.livestock.healthScore;
  }

  function startAutoUpdate() {
    // Update weather every 30 seconds
    setInterval(updateWeather, 30000);
    // Update market prices every minute
    setInterval(updateMarketPrices, 60000);
  }

  function updateWeather() {
    const temp = 25 + Math.floor(Math.random() * 6);
    document.getElementById('currentTemp').textContent = temp + '¬∞C';
    document.getElementById('currentTempDetail').textContent = temp + '¬∞C';
    document.getElementById('feelsLike').textContent = (temp + 2);
  }

  function updateMarketPrices() {
    // Simulate price fluctuations
    const prices = {
      maize: 43 + Math.floor(Math.random() * 5),
      tomatoes: 78 + Math.floor(Math.random() * 8),
      milk: 58 + Math.floor(Math.random() * 5),
      eggs: 17 + Math.floor(Math.random() * 3)
    };
  }

  // Navigation
  function showSection(sectionId) {
    document.querySelectorAll('.section').forEach(section => {
      section.classList.remove('active');
    });
    
    document.getElementById(sectionId).classList.add('active');
    
    document.querySelectorAll('.nav-links a').forEach(link => {
      link.classList.remove('active');
    });
    
    event.target.classList.add('active');
  }

  function toggleSidebar() {
    const sidebar = document.getElementById('sidebar');
    sidebar.classList.toggle('active');
  }

  // Chat functionality
  function sendMessage() {
    const input = document.getElementById('chatInput');
    const messages = document.getElementById('chatMessages');
    
    if (input.value.trim()) {
      const userMsg = document.createElement('div');
      userMsg.className = 'message user-message';
      userMsg.textContent = input.value;
      messages.appendChild(userMsg);
      
      const question = input.value.toLowerCase();
      
      setTimeout(() => {
        const botMsg = document.createElement('div');
        botMsg.className = 'message bot-message';
        botMsg.innerHTML = `<strong>FarmBot:</strong> ${getBotResponse(question)}`;
        messages.appendChild(botMsg);
        messages.scrollTop = messages.scrollHeight;
      }, 1000);
      
      input.value = '';
      messages.scrollTop = messages.scrollHeight;
    }
  }

  function getBotResponse(question) {
    const responses = {
      'fertilizer': 'For maize, I recommend DAP (18-46-0) at planting and CAN (26-0-0) for topdressing after 6 weeks. Apply 2 bags of DAP per acre at planting. The cost is approximately KES 8,400 per acre.',
      'sick': 'For sick chickens, isolate them immediately. Common symptoms include lethargy, reduced appetite, and unusual droppings. Provide electrolytes and check for Newcastle disease. Contact Dr. Sarah Wanjiku at +254-700-VETHELP for immediate consultation.',
      'tomato': 'Best time to plant tomatoes in Kenya is during the long rains (March-May) or short rains (October-December). Ensure soil temperature is above 16¬∞C. Use certified seeds and prepare seedbeds 4 weeks before transplanting.',
      'pregnancy': 'Signs of cow pregnancy include: missed heat cycles (21 days after breeding), increased appetite, udder development starting from 6 months, calm behavior, and weight gain. Confirm with a vet check after 60 days using rectal palpation or ultrasound.',
      'milk': 'To increase milk production: 1) Provide quality feed with 16-18% protein, 2) Ensure constant access to clean water (80-100L/day), 3) Maintain regular milking schedule, 4) Reduce stress, 5) Use mineral supplements, especially during dry season.',
      'pest': 'For tomato pest control: Use neem oil spray for aphids and whiteflies. For bacterial wilt, practice crop rotation. Spray copper-based fungicides for early and late blight. Remove and destroy infected plants immediately.',
      'default': 'That\'s a great question! Based on your farm profile, I can provide specific advice. Let me help you with detailed information. You can also consult with our expert Dr. Sarah Wanjiku or post in our community forums where experienced farmers share their knowledge.'
    };
    
    for (let key in responses) {
      if (question.includes(key)) {
        return responses[key];
      }
    }
    return responses.default;
  }

  function askQuestion(question) {
    document.getElementById('chatInput').value = question;
    sendMessage();
  }

  // Load forecast data
  function loadForecastData() {
    const forecastData = [
      { day: 'Today', weather: 'Partly Cloudy', high: 29, low: 18, rain: '0%', advice: 'Good day for harvesting' },
      { day: 'Tomorrow', weather: 'Light Rain', high: 26, low: 16, rain: '60%', advice: 'Postpone spraying' },
      { day: 'Wednesday', weather: 'Sunny', high: 30, low: 19, rain: '10%', advice: 'Perfect for field work' },
      { day: 'Thursday', weather: 'Partly Cloudy', high: 28, low: 17, rain: '20%', advice: 'Good planting conditions' },
      { day: 'Friday', weather: 'Heavy Rain', high: 24, low: 15, rain: '85%', advice: 'Stay indoors, check drainage' },
      { day: 'Saturday', weather: 'Cloudy', high: 26, low: 16, rain: '40%', advice: 'Light work only' },
      { day: 'Sunday', weather: 'Sunny', high: 29, low: 18, rain: '5%', advice: 'Great for all activities' }
    ];

    const tbody = document.getElementById('forecastBody');
    tbody.innerHTML = '';
    
    forecastData.forEach(item => {
      const row = document.createElement('tr');
      row.innerHTML = `
        <td data-label="Day">${item.day}</td>
        <td data-label="Weather">${item.weather}</td>
        <td data-label="High/Low">${item.high}¬∞/${item.low}¬∞</td>
        <td data-label="Rain">${item.rain}</td>
        <td data-label="Farming Advice">${item.advice}</td>
      `;
      tbody.appendChild(row);
    });
  }

  // Load market products
  function loadMarketProducts() {
    const products = [
      { product: 'Fertilizer (DAP)', price: 'KES 4,200/bag', quantity: '50 bags', location: 'Kiambu', seller: 'AgriSupply Co.' },
      { product: 'Maize Seeds', price: 'KES 350/kg', quantity: '100 kg', location: 'Nakuru', seller: 'SeedMaster' },
      { product: 'Dairy Cow', price: 'KES 85,000', quantity: '3 available', location: 'Meru', seller: 'KiambuFarms' },
      { product: 'Tractor Rental', price: 'KES 3,500/day', quantity: 'Available', location: 'Nairobi', seller: 'FarmEquip Ltd' },
      { product: 'Chicken Feed', price: 'KES 2,800/bag', quantity: '100 bags', location: 'Kiambu', seller: 'PoultryMart' }
    ];

    const tbody = document.getElementById('marketProducts');
    tbody.innerHTML = '';
    
    products.forEach(item => {
      const row = document.createElement('tr');
      row.innerHTML = `
        <td data-label="Product">${item.product}</td>
        <td data-label="Price">${item.price}</td>
        <td data-label="Quantity">${item.quantity}</td>
        <td data-label="Location">${item.location}</td>
        <td data-label="Seller">${item.seller}</td>
        <td data-label="Action"><button class="btn btn-secondary" onclick="contactSeller('${item.seller}')">Contact</button></td>
      `;
      tbody.appendChild(row);
    });
  }

  // Load calendar activities
  function loadCalendarActivities() {
    const activities = [
      { date: 'Aug 1', crop: 'Maize', activity: 'Apply NPK Fertilizer', field: 'Field A (5 acres)', status: 'Due' },
      { date: 'Aug 3', crop: 'Tomatoes', activity: 'Weeding & Pruning', field: 'Greenhouse 1', status: 'Due' },
      { date: 'Aug 5', crop: 'Tomatoes', activity: 'First Harvest', field: 'Greenhouse 1', status: 'Upcoming' },
      { date: 'Aug 10', crop: 'Beans', activity: 'First Weeding', field: 'Field C', status: 'Scheduled' },
      { date: 'Aug 15', crop: 'Maize', activity: 'Pest Control Spray', field: 'Field A', status: 'Scheduled' }
    ];

    const tbody = document.getElementById('calendarActivities');
    tbody.innerHTML = '';
    
    activities.forEach(item => {
      const row = document.createElement('tr');
      const btnClass = item.status === 'Due' ? 'btn btn-success' : 'btn btn-secondary';
      const btnText = item.status === 'Due' ? 'Mark Done' : 'Set Reminder';
      
      row.innerHTML = `
        <td data-label="Date">${item.date}</td>
        <td data-label="Crop">${item.crop}</td>
        <td data-label="Activity">${item.activity}</td>
        <td data-label="Field">${item.field}</td>
        <td data-label="Status">${item.status}</td>
        <td data-label="Action"><button class="${btnClass}" onclick="handleActivity('${item.date}', '${item.activity}')">${btnText}</button></td>
      `;
      tbody.appendChild(row);
    });
  }

  // Load pregnancy tracker
  function loadPregnancyTracker() {
    const pregnancies = [
      { id: 'COW-247', breed: 'Friesian', dueDate: 'Sep 15, 2026', daysLeft: 19, stage: 'Third Trimester', status: 'Monitor' },
      { id: 'COW-189', breed: 'Ayrshire', dueDate: 'Oct 3, 2026', daysLeft: 37, stage: 'Third Trimester', status: 'Healthy' },
      { id: 'COW-301', breed: 'Jersey', dueDate: 'Nov 12, 2026', daysLeft: 77, stage: 'Second Trimester', status: 'Healthy' }
    ];

    const tbody = document.getElementById('pregnancyTracker');
    tbody.innerHTML = '';
    
    pregnancies.forEach(item => {
      const statusColor = item.status === 'Monitor' ? 'orange' : 'green';
      const row = document.createElement('tr');
      row.innerHTML = `
        <td data-label="Animal ID">${item.id}</td>
        <td data-label="Breed">${item.breed}</td>
        <td data-label="Due Date">${item.dueDate}</td>
        <td data-label="Days Left">${item.daysLeft} days</td>
        <td data-label="Stage">${item.stage}</td>
        <td data-label="Status"><span style="color: ${statusColor};">${item.status}</span></td>
      `;
      tbody.appendChild(row);
    });
  }

  // Load experts
  function loadExperts() {
    const experts = [
      { name: 'Dr. Sarah Wanjiku', specialization: 'Veterinarian', location: 'Kiambu (5km)', rating: '‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê', availability: 'Available Today' },
      { name: 'John Kamau', specialization: 'Crop Specialist', location: 'Nairobi (12km)', rating: '‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê', availability: 'Available Tomorrow' },
      { name: 'Dr. Michael Ochieng', specialization: 'Soil Expert', location: 'Nakuru (45km)', rating: '‚≠ê‚≠ê‚≠ê‚≠ê', availability: 'Available This Week' },
      { name: 'Grace Muthoni', specialization: 'Agricultural Officer', location: 'Kiambu (8km)', rating: '‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê', availability: 'Available Today' }
    ];

    const tbody = document.getElementById('expertsTable');
    tbody.innerHTML = '';
    
    experts.forEach(item => {
      const btnClass = item.availability.includes('Today') ? 'btn' : 'btn btn-secondary';
      const btnText = item.availability.includes('Today') ? 'Call Now' : item.availability.includes('Tomorrow') ? 'Book Visit' : 'Schedule';
      
      const row = document.createElement('tr');
      row.innerHTML = `
        <td data-label="Name">${item.name}</td>
        <td data-label="Specialization">${item.specialization}</td>
        <td data-label="Location">${item.location}</td>
        <td data-label="Rating">${item.rating}</td>
        <td data-label="Availability">${item.availability}</td>
        <td data-label="Contact"><button class="${btnClass}" onclick="contactExpert('${item.name}')">${btnText}</button></td>
      `;
      tbody.appendChild(row);
    });
  }

  // Load forum posts
  function loadForumPosts() {
    const posts = [
      {
        author: 'Mary Njeri',
        category: 'Crop Management',
        time: '2 hours ago',
        replies: 23,
        title: 'Best organic pesticides for tomato farming?',
        content: 'I\'m looking for effective organic alternatives to chemical pesticides for my tomato greenhouse. Has anyone tried neem oil or other natural solutions?',
        likes: 15
      },
      {
        author: 'Peter Kiplimo',
        category: 'Livestock Care',
        time: '5 hours ago',
        replies: 18,
        title: 'Increasing milk production during dry season',
        content: 'My cows\' milk production has dropped by 30% this dry season. What feeding strategies and supplements work best to maintain production?',
        likes: 12
      },
      {
        author: 'Grace Wambui',
        category: 'Success Stories',
        time: '1 day ago',
        replies: 31,
        title: 'From 1 acre to 10 acres in 3 years! üéâ',
        content: 'Sharing my journey from small-scale to commercial farming using smart techniques I learned here. Revenue grew from KES 50K to 800K annually!',
        likes: 45
      }
    ];

    const container = document.getElementById('forumPosts');
    container.innerHTML = '';
    
    posts.forEach(post => {
      const div = document.createElement('div');
      div.className = 'forum-post';
      div.innerHTML = `
        <div class="post-header">
          <span><strong>${post.author}</strong> posted in <em>${post.category}</em></span>
          <span>${post.time} ‚Ä¢ ${post.replies} replies</span>
        </div>
        <h5>${post.title}</h5>
        <p>${post.content}</p>
        <button class="btn btn-secondary" onclick="replyToPost('${post.title}')">Reply</button>
        <button class="btn btn-secondary" onclick="likePost('${post.title}')">üëç ${post.likes}</button>
      `;
      container.appendChild(div);
    });
  }

  // Load funding opportunities
  function loadFundingOpportunities() {
    const opportunities = [
      { program: 'Youth Agribusiness Loan', amount: 'Up to KES 500K', deadline: 'Aug 15, 2026', eligibility: '18-35 years', status: 'Open' },
      { program: 'Dairy Development Grant', amount: 'KES 200K', deadline: 'Sep 1, 2026', eligibility: '5+ dairy cows', status: 'Open' },
      { program: 'Climate Smart Agriculture', amount: 'KES 150K', deadline: 'Aug 30, 2026', eligibility: 'All farmers', status: 'Open' },
      { program: 'Women Empowerment Fund', amount: 'KES 300K', deadline: 'Oct 15, 202', eligibility: 'Women farmers', status: 'Opening Soon' }
    ];

    const tbody = document.getElementById('fundingOpportunities');
    tbody.innerHTML = '';
    
    opportunities.forEach(item => {
      const btnClass = item.status === 'Open' ? 'btn' : 'btn btn-secondary';
      const btnText = item.status === 'Open' ? 'Apply Now' : 'Get Notified';
      
      const row = document.createElement('tr');
      row.innerHTML = `
        <td data-label="Program">${item.program}</td>
        <td data-label="Amount">${item.amount}</td>
        <td data-label="Deadline">${item.deadline}</td>
        <td data-label="Eligibility">${item.eligibility}</td>
        <td data-label="Status">${item.status}</td>
        <td data-label="Action"><button class="${btnClass}" onclick="applyForFunding('${item.program}')">${btnText}</button></td>
      `;
      tbody.appendChild(row);
    });
  }

  // Modal functions
  function openModal(modalId) {
    document.getElementById(modalId).classList.add('active');
  }

  function closeModal(modalId) {
    document.getElementById(modalId).classList.remove('active');
  }

  // Action functions
  function listProduct() {
    const type = document.getElementById('sellProductType').value;
    const quantity = document.getElementById('sellQuantity').value;
    const price = document.getElementById('sellPrice').value;
    const location = document.getElementById('sellLocation').value;

    if (quantity && price && location) {
      showNotification(`Your ${type} (${quantity} units at KES ${price}/unit) has been listed successfully!`, 'success');
      closeModal('sellModal');
      
      // Clear form
      document.getElementById('sellQuantity').value = '';
      document.getElementById('sellPrice').value = '';
      document.getElementById('sellLocation').value = '';
    } else {
      showNotification('Please fill in all fields', 'error');
    }
  }

  function addCropActivity() {
    const crop = document.getElementById('newCropType').value;
    const activity = document.getElementById('newActivity').value;
    const date = document.getElementById('newActivityDate').value;
    const field = document.getElementById('newActivityField').value;

    if (crop && activity && date && field) {
      showNotification(`Activity added: ${activity} for ${crop} on ${date} at ${field}`, 'success');
      
      // Clear form
      document.getElementById('newActivityDate').value = '';
      document.getElementById('newActivityField').value = '';
    } else {
      showNotification('Please fill in all fields', 'error');
    }
  }

  function addNewAnimal() {
    const type = document.getElementById('newAnimalType').value;
    const breed = document.getElementById('newAnimalBreed').value;
    const id = document.getElementById('newAnimalID').value;
    const dob = document.getElementById('newAnimalDOB').value;

    if (breed && id && dob) {
      farmData.livestock.total++;
      document.getElementById('totalAnimals').textContent = farmData.livestock.total;
      document.getElementById('statTotalAnimals').textContent = farmData.livestock.total;
      
      showNotification(`New ${type} (${id}) added successfully!`, 'success');
      
      // Clear form
      document.getElementById('newAnimalBreed').value = '';
      document.getElementById('newAnimalID').value = '';
      document.getElementById('newAnimalDOB').value = '';
    } else {
      showNotification('Please fill in all fields', 'error');
    }
  }

  function scheduleVetVisit() {
    const animalID = document.getElementById('vetAnimalID').value;
    const reason = document.getElementById('vetReason').value;
    const date = document.getElementById('vetDate').value;

    if (animalID && date) {
      showNotification(`Vet visit scheduled for ${animalID} on ${date}`, 'success');
      closeModal('vetModal');
      
      // Clear form
      document.getElementById('vetAnimalID').value = '';
      document.getElementById('vetDate').value = '';
      document.getElementById('vetNotes').value = '';
    } else {
      showNotification('Please fill in required fields', 'error');
    }
  }

  function recordEggCollection() {
    const count = document.getElementById('eggCount').value;
    const date = document.getElementById('eggDate').value;
    const damaged = document.getElementById('eggDamaged').value || 0;

    if (count && date) {
      const netEggs = parseInt(count) - parseInt(damaged);
      farmData.livestock.dailyEggs = parseInt(count);
      document.getElementById('dailyEggs').textContent = farmData.livestock.dailyEggs;
      
      showNotification(`Recorded ${netEggs} good eggs (${damaged} damaged) for ${date}`, 'success');
      closeModal('eggCollectionModal');
      
      // Clear form
      document.getElementById('eggCount').value = '';
      document.getElementById('eggDamaged').value = '';
    } else {
      showNotification('Please fill in required fields', 'error');
    }
  }

  function createForumPost() {
    const category = document.getElementById('newForumCategory').value;
    const title = document.getElementById('newForumTitle').value;
    const description = document.getElementById('newForumDescription').value;

    if (title && description) {
      showNotification('Your forum post has been created successfully!', 'success');
      
      // Clear form
      document.getElementById('newForumTitle').value = '';
      document.getElementById('newForumDescription').value = '';
    } else {
      showNotification('Please fill in all fields', 'error');
    }
  }

  function submitFundingApplication() {
    const type = document.getElementById('fundingType').value;
    const amount = document.getElementById('fundingAmount').value;
    const purpose = document.getElementById('fundingPurpose').value;
    const description = document.getElementById('fundingDescription').value;

    if (amount && description) {
      showNotification(`Funding application for KES ${amount} submitted successfully!`, 'success');
      
      // Clear form
      document.getElementById('fundingAmount').value = '';
      document.getElementById('fundingDescription').value = '';
    } else {
      showNotification('Please fill in all fields', 'error');
    }
  }

  function handleActivity(date, activity) {
    showNotification(`Activity "${activity}" on ${date} has been marked as done!`, 'success');
  }

  function contactSeller(seller) {
    showNotification(`Contact request sent to ${seller}. They will reach out to you soon.`, 'success');
  }

  function contactExpert(expert) {
    showNotification(`Connecting you with ${expert}...`, 'success');
  }

  function searchExperts() {
    const type = document.getElementById('expertType').value;
    const location = document.getElementById('expertLocation').value;
    showNotification(`Searching for ${type} in ${location}...`, 'success');
  }

  function reportEmergency() {
    if (confirm('Are you sure you want to report an emergency? This will alert nearby experts.')) {
      showNotification('Emergency reported! Help is on the way. Please stay calm.', 'warning');
    }
  }

  function replyToPost(title) {
    showNotification(`Reply form opened for: ${title}`, 'success');
  }

  function likePost(title) {
    showNotification(`You liked the post: ${title}`, 'success');
  }

  function applyForFunding(program) {
    showNotification(`Application form for ${program} is being prepared...`, 'success');
  }

  function downloadFinancialReport() {
    showNotification('Financial report is being generated. Download will start shortly...', 'success');
  }

  // Notification system
  function showNotification(message, type = 'success') {
    const notification = document.createElement('div');
    notification.className = `notification ${type}`;
    notification.innerHTML = `
      <div style="display: flex; align-items: center; gap: 0.5rem;">
        <span style="font-size: 1.5rem;">${type === 'success' ? '‚úÖ' : type === 'error' ? '‚ùå' : '‚ö†Ô∏è'}</span>
        <span>${message}</span>
      </div>
    `;
    
    document.body.appendChild(notification);
    
    setTimeout(() => {
      notification.style.animation = 'slideInRight 0.3s ease reverse';
      setTimeout(() => {
        document.body.removeChild(notification);
      }, 300);
    }, 3000);
  }

  // Close modals when clicking outside
  window.onclick = function(event) {
    if (event.target.classList.contains('modal')) {
      event.target.classList.remove('active');
    }
  }
</script>

</body>
</html>